import{_ as Oe,r as I,g as Pe,h as Le,c as f,o as g,i as Q,a as l,t as w,n as U,f as ee,j as G,k as ue,F as De,l as Me,u as Ve}from"./index-Dse1skbz.js";import{c as pe}from"./index-C8WwnQ1J.js";function Ne(o){return new Worker("/assets/heartbeatWorker-C1AN_X6I.js",{name:o==null?void 0:o.name})}const A={RECEIVE_PLAYLIST:"RECEIVE_PLAYLIST",RECEIVE_VOICE_RANGE:"RECEIVE_VOICE_RANGE",RECEIVE_VOICE_ONCE:"RECEIVE_VOICE_ONCE",PLAY:"PLAY",PAUSE:"PAUSE",STOP_PLAYLIST:"STOP_PLAYLIST",STOP_VOICE:"STOP_VOICE"},H={MUSIC:1,VOICE:2},z={data:null,timestamp:0};function Ae(){if(z.data&&Date.now()-z.timestamp<3e5)return z.data;const c={screen:{width:window.screen.width,height:window.screen.height,availWidth:window.screen.availWidth,availHeight:window.screen.availHeight,colorDepth:window.screen.colorDepth,pixelRatio:window.devicePixelRatio},userAgent:navigator.userAgent,language:navigator.language,platform:navigator.platform,timezone:Intl.DateTimeFormat().resolvedOptions().timeZone};return z.data=JSON.stringify(c),z.timestamp=Date.now(),z.data}function R(o){return{operationType:o.operationType,bindId:o.bindId||null,resourceType:o.resourceType||null,resourceId:o.resourceId||null,resourceName:o.resourceName||null,extraData:o.extraData||null,deviceInfo:Ae(),clientTime:new Date().toISOString()}}async function Re(o){if(!o)return;const c=localStorage.getItem("userInfo");if(!c)return;const T=JSON.parse(c).id,F=new Blob([JSON.stringify(o)],{type:"application/json"}),k=`${pe.apiBaseUrl}/play-log/report?userId=${T}`;navigator.sendBeacon(k,F)||fetch(k,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o),keepalive:!0}).catch(()=>{})}function W(o){o&&Re(o)}function We(o){var c;W(R({operationType:A.RECEIVE_PLAYLIST,bindId:o.bindId,extraData:{playlistName:o.playlistName,musicCount:((c=o.musics)==null?void 0:c.length)||0,playMode:o.playMode}}))}function Be(o){W(R({operationType:A.RECEIVE_VOICE_RANGE,bindId:o.bindId,resourceType:H.VOICE,resourceId:o.voiceId,resourceName:o.title,extraData:{voiceType:o.voiceType,duration:o.duration}}))}function Ue(o){W(R({operationType:A.RECEIVE_VOICE_ONCE,bindId:o.bindId,resourceType:H.VOICE,resourceId:o.voiceId,resourceName:o.title,extraData:{duration:o.duration}}))}function ce(o,c,h=null,T=!1){W(R({operationType:A.PLAY,bindId:c,resourceType:o._temporary||o._voice?H.VOICE:H.MUSIC,resourceId:o.id,resourceName:o.title,extraData:{artist:o.artist,index:h,manual:T}}))}function ze(o,c){W(R({operationType:A.PAUSE,bindId:Je(),resourceType:H.MUSIC,resourceId:o.id,resourceName:o.title,extraData:{currentTime:Math.round(c)}}))}function He(o){W(R({operationType:A.STOP_PLAYLIST,bindId:o}))}function Ye(o,c){W(R({operationType:A.STOP_VOICE,bindId:c,resourceType:H.VOICE,resourceId:o.voiceId,resourceName:o.title}))}function Je(){try{const o=localStorage.getItem("music_player_playlist");if(o)return JSON.parse(o).bindId||null}catch{}return null}const $e={class:"player-page"},Ge={class:"container"},je={class:"header"},Fe={class:"header-right"},Xe={class:"username"},Ke={class:"main-content"},Ze={key:0,class:"waiting-state"},qe={key:0,class:"waiting-subtitle"},Qe={key:1,class:"waiting-subtitle"},et={key:1,class:"player-interface"},tt={class:"album-section"},lt={class:"cover-inner"},nt=["src"],ot={class:"track-info"},at={class:"track-title"},st={class:"track-artist"},it={class:"track-meta"},rt={key:0,class:"temp-voice-indicator"},ut={key:1},ct={class:"progress-section"},dt={class:"time-display"},vt={class:"time-current"},pt={class:"time-total"},ft={class:"controls-section"},gt={key:0,viewBox:"0 0 24 24",fill:"currentColor"},yt={key:1,viewBox:"0 0 24 24",fill:"currentColor"},It={class:"playlist-container"},mt={class:"playlist-header"},ht={class:"playlist-body"},bt=["onClick"],_t={class:"item-index"},Tt={key:0,class:"playing-icon",viewBox:"0 0 24 24"},St={key:1},wt={class:"item-info"},Ct={class:"item-title-row"},kt={class:"item-title"},Et={key:0,class:"temp-voice-tag"},xt={class:"item-artist"},Ot={key:0,class:"item-duration"},te="music_player_playlist",de=4*60*1e3,Pt=3e3,ve='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><rect fill="%23333" width="100" height="100"/><circle cx="50" cy="40" r="20" fill="%23555"/><rect x="35" y="65" width="30" height="20" rx="5" fill="%23555"/></svg>',Lt={__name:"Player",setup(o){const c=Ve();function h(){try{const e=localStorage.getItem(te);return e?JSON.parse(e):null}catch{return null}}function T(e){localStorage.setItem(te,JSON.stringify(e))}function F(e){const t=h();t&&(t.currentIndex=e,T(t))}function k(){localStorage.removeItem(te)}const B=I(!1),v=I(!1),x=I(0),O=I(0),P=I(0),u=I(0),L=I("playlist"),r=I([]),i=I(null),C=I(""),b=I(null),D=new Map,X=I("未登录"),Y=I(!1),j=I(!1);let n=null,d=null,E=null,S=null,M=!1;function le(e){const t=Date.now(),a=D.get(e);if(a&&t-a<de)return console.log("重复推送，已跳过:",e),!0;D.set(e,t);for(const[s,_]of D.entries())t-_>de&&D.delete(s);return!1}function fe(e,t,a={}){const s={type:e,items:t,currentIndex:a.currentIndex??0,...a};T(s),L.value=e,r.value=t,u.value=s.currentIndex,e==="playlist"?C.value=`歌单 · ${t.length}首`:C.value="语音通知"}function ge(){k(),L.value="playlist",r.value=[],u.value=0,C.value="",i.value=null,n&&(n.pause(),x.value=0,O.value=0,P.value=0),v.value=!1}function ne(){n&&(n.pause(),x.value=0,O.value=0,P.value=0),v.value=!1,L.value="playlist",r.value=[],u.value=0,i.value=null,C.value="等待播放...",k()}function m(e,t=!1){e<0||e>=r.value.length||(u.value=e,F(e),oe(r.value[e],t))}function ye(e){e<0||e>=r.value.length||e===u.value&&v.value||m(e,!0)}function Ie(){n||(n=new Audio,n.preload="auto",n.autoplay=!1,n.setAttribute("playsinline","true"),n.setAttribute("webkit-playsinline","true"),n.onloadedmetadata=()=>{O.value=n.duration,console.log("音频加载完成，时长:",O.value,"秒")},n.ontimeupdate=()=>{n&&(x.value=n.currentTime,P.value=n.currentTime/n.duration*100)},n.onended=()=>{console.log("音频播放结束"),he()},n.onerror=e=>{var t;console.warn("音频加载失败，跳到下一首:",(t=i.value)==null?void 0:t.title,e),K()},n.onpause=()=>{n&&!n.ended&&n.currentTime>0&&n.currentTime<n.duration&&(console.log("音频被暂停"),v.value=!1)},n.onplay=()=>{console.log("音频开始播放"),v.value=!0},n.onwaiting=()=>{console.log("音频加载中...")},n.oncanplay=()=>{console.log("音频可以播放了")},console.log("Audio对象已初始化（复用模式，支持iOS）"))}function me(e){"mediaSession"in navigator&&(navigator.mediaSession.metadata=new MediaMetadata({title:e.title||"未知标题",artist:e.artist||"未知艺术家",album:e.album||"",artwork:e.coverUrl?[{src:e.coverUrl,sizes:"512x512",type:"image/jpeg"}]:[]}),navigator.mediaSession.setActionHandler("play",()=>{console.log("锁屏播放按钮被点击"),!(n&&!n.paused)&&n&&n.play().catch(t=>{console.log("锁屏播放失败（iOS限制）:",t.message),console.log("请返回浏览器页面继续播放")})}),navigator.mediaSession.setActionHandler("pause",()=>{console.log("锁屏暂停按钮被点击"),n&&n.pause()}),navigator.mediaSession.setActionHandler("previoustrack",()=>{console.log("锁屏上一曲按钮被点击"),ae()}),navigator.mediaSession.setActionHandler("nexttrack",()=>{console.log("锁屏下一曲按钮被点击"),se()}),console.log("Media Session API 已更新"))}function oe(e,t=!1){console.log("加载并播放:",e),i.value=e,Ie(),n.src!==e.fileUrl&&(n.src=e.fileUrl,n.load()),me(e);const a=n.play();a!==void 0&&a.then(()=>{v.value=!0,console.log("播放成功");const s=h();ce(e,s==null?void 0:s.bindId,u.value,t)}).catch(s=>{v.value=!1,console.log("播放失败:",s.message,"（可能被浏览器拦截，需要用户交互）"),s.name==="NotAllowedError"&&console.log("iOS自动播放被阻止，这是正常现象")})}function he(){if(i.value&&i.value._temporary){console.log("临时语音条播放完成，从列表中移除");const e=h();if((e==null?void 0:e.type)==="temp_voice"){if(k(),r.value=[],u.value=0,i.value=null,C.value="",n&&(n.pause(),x.value=0,O.value=0,P.value=0),v.value=!1,b.value){const a=b.value;b.value=null,V(a),a.items.length>0&&m(0)}return}const t=r.value.filter(a=>!a._temporary);if(r.value=t,e&&(e.items=t,u.value>=t.length&&(u.value=Math.max(0,t.length-1),e.currentIndex=u.value),T(e)),b.value){const a=b.value;b.value=null,V(a),a.items.length>0&&m(0);return}t.length>0&&m(u.value);return}if(b.value){const e=b.value;b.value=null,V(e),e.items.length>0&&m(0);return}K()}function be(){if(!n&&i.value){oe(i.value,!0);return}!n||!i.value||(v.value?(n.pause(),i.value&&ze(i.value,x.value),v.value=!1):n.play().then(()=>{v.value=!0;const e=h();i.value&&ce(i.value,e==null?void 0:e.bindId,u.value,!0)}).catch(e=>{console.log("播放失败:",e.message),v.value=!1}))}function ae(){if(r.value.length===0)return;let e=u.value-1;e<0&&(e=r.value.length-1),m(e,!0)}function K(){if(r.value.length===0)return;let e;L.value==="voice"?e=0:e=(u.value+1)%r.value.length,m(e)}function se(){if(r.value.length===0)return;let e;L.value==="voice"?e=0:e=(u.value+1)%r.value.length,m(e,!0)}function _e(e){if(!n||!i.value)return;const t=e.currentTarget.getBoundingClientRect(),a=(e.clientX-t.left)/t.width;n.currentTime=a*n.duration}function V(e){fe(e.type,e.items,{bindId:e.bindId,playlistId:e.playlistId,playMode:e.playMode,playType:e.playType,currentIndex:e.currentIndex,startDate:e.startDate,endDate:e.endDate,startTime:e.startTime,endTime:e.endTime}),e.currentIndex!==void 0&&(u.value=e.currentIndex)}function Te(e){const t=e.pushId||"playlist_"+e.bindId;if(le(t))return;const a=e.playType===2,s=e.musics||[];if(s.length===0)return;We(e);const _=h();if(_&&_.type==="playlist"&&_.bindId===e.bindId){console.log("收到当前正在播放的歌单，只更新信息不切换播放");let y=_.currentIndex;if(i.value&&i.value.id){const N=s.findIndex($=>$.id===i.value.id);N!==-1&&(y=N,console.log("当前播放歌曲在新列表中的位置:",N))}const q={..._,items:s,currentIndex:y,startDate:e.startDate,endDate:e.endDate,startTime:e.startTime,endTime:e.endTime};T(q),r.value=s,u.value=y,C.value=`歌单 · ${s.length}首`;return}const p={type:"playlist",items:s,bindId:e.bindId,playlistId:e.playlistId,playMode:e.playMode,playType:e.playType,currentIndex:0,startDate:e.startDate,endDate:e.endDate,startTime:e.startTime,endTime:e.endTime};if(i.value&&i.value._temporary){console.log("正在播放一次性语音条，等待播放完成后播放新歌单"),b.value=p;return}if(r.value.length===0){console.log("播放列表为空，直接播放歌单"),V(p),m(0);return}a?(console.log("强制切换，立即播放新歌单"),V(p),m(0)):(console.log("普通切换，等待当前播放完成后播放新歌单"),b.value=p)}function Se(e){const t=e.pushId||(e.voiceType==="once"?"voice_once_":"voice_range_")+e.bindId;if(le(t))return;if(e.voiceType==="once"?Ue(e):Be(e),e.voiceType==="once"){console.log("收到一次性语音条，临时插入到下一首");const y={id:e.voiceId,title:e.title||"语音通知",artist:"语音",album:"",duration:e.duration,fileUrl:e.fileUrl,coverUrl:"",_temporary:!0,_voiceBindId:e.bindId};if(r.value.length===0){r.value=[y],u.value=0,T({type:"temp_voice",items:[y],currentIndex:0}),m(0);return}const q=u.value+1,N=[...r.value];N.splice(q,0,y),r.value=N;const $=h();$&&($.items=N,T($)),K();return}const s=h(),p={type:"voice",items:[{id:e.voiceId,title:e.title||"语音通知",artist:"语音",album:"",duration:e.duration,fileUrl:e.fileUrl,coverUrl:"",_voice:!0}],bindId:e.bindId,currentIndex:0,startDate:e.startDate,endDate:e.endDate,startTime:e.startTime,endTime:e.endTime};if(s&&s.type==="voice"&&s.bindId===e.bindId){console.log("收到当前正在播放的语音，只更新信息不切换播放");const y={...s,items:p.items,startDate:e.startDate,endDate:e.endDate,startTime:e.startTime,endTime:e.endTime};T(y),r.value=p.items,C.value="语音通知";return}if(i.value&&i.value._temporary){console.log("正在播放一次性语音条，等待播放完成后播放范围语音条"),b.value=p;return}if(r.value.length===0){console.log("播放列表为空，直接播放语音"),V(p),m(0);return}console.log("语音优先，清空当前播放列表，播放语音"),ge(),V(p),m(0)}function we(e){switch(e.type){case"LOGIN_SUCCESS":e.data&&(localStorage.setItem("userInfo",JSON.stringify(e.data)),X.value=e.data.nickname||e.data.username||"未命名",console.log("登录成功，用户信息已更新:",e.data));break;case"ERROR":console.error("WebSocket错误:",e.message),e.errorType==="auth"&&(console.log("认证失败，清除本地信息并跳转登录页"),localStorage.removeItem("userInfo"),M=!1,d&&(d.close(),d=null),S&&(clearTimeout(S),S=null),J(),c.push("/login"));break;case"PLAYLIST":Te(e.playlist);break;case"VOICE":Se(e.voice);break;case"VOICE_STOP":if(e.stop&&e.stop.bindId){const t=h();t&&t.type==="voice"&&t.bindId===e.stop.bindId?(console.log("停止当前播放的语音条"),Ye(e.stop,e.stop.bindId),D.delete("voice_once_"+e.stop.bindId),D.delete("voice_range_"+e.stop.bindId),ne()):console.log("语音停止指令不是当前播放的，忽略")}break;case"PLAYLIST_STOP":if(e.stop&&e.stop.bindId){const t=h();t&&t.type==="playlist"&&t.bindId===e.stop.bindId?(console.log("停止当前播放的歌单"),He(e.stop.bindId),D.delete("playlist_"+e.stop.bindId),ne()):console.log("歌单停止指令不是当前播放的，忽略")}break}}function ie(){const e=localStorage.getItem("userInfo");if(!e){c.push("/login");return}const t=JSON.parse(e),a=t.username,s=t.password;if(!a||!s){c.push("/login");return}if(M){console.log("正在连接中，跳过重复连接");return}d&&(d.close(),d=null),M=!0;const _=pe.getWsUrl();console.log("WS连接:",_),d=new WebSocket(_),d.onopen=()=>{console.log("WS已连接"),B.value=!0,M=!1,d.send(JSON.stringify({type:"LOGIN",username:a,password:s})),ke()},d.onmessage=p=>{try{const y=JSON.parse(p.data);console.log("WS消息:",y),we(y)}catch(y){console.error("WS解析错误",y)}},d.onerror=p=>{console.error("WS错误",p),B.value=!1,M=!1},d.onclose=p=>{console.log("WS关闭, code:",p.code,"reason:",p.reason),B.value=!1,M=!1,J(),Ce()}}function Ce(){S&&(clearTimeout(S),S=null);const e=Pt;console.log(`${e/1e3}秒后尝试重连...`),S=setTimeout(()=>{ie()},e)}function ke(){E&&(console.log("Worker 已存在，先停止旧的"),J()),E=new Ne,console.log("Worker 已创建"),E.onmessage=e=>{const{type:t}=e.data;t==="heartbeat"&&d&&d.readyState===WebSocket.OPEN&&(console.log("发送心跳到服务器"),d.send(JSON.stringify({type:"HEARTBEAT"})))},E.postMessage({type:"start",period:3e4}),console.log("心跳已启动 (Web Worker, 30秒间隔)")}function J(){E&&(console.log("停止 Worker"),E.postMessage({type:"stop"}),E.terminate(),E=null)}function Z(e){if(!e||!isFinite(e))return"0:00";const t=Math.floor(e/60),a=Math.floor(e%60);return`${t}:${a.toString().padStart(2,"0")}`}function Ee(){localStorage.removeItem("userInfo"),k(),M=!1,d&&d.close(),S&&clearTimeout(S),J(),c.push("/login")}function xe(e){e.target.src=ve}Pe(()=>{const e=localStorage.getItem("userInfo");if(e)try{const t=JSON.parse(e);X.value=t.nickname||t.username||"未命名"}catch(t){console.error("解析用户信息失败",t)}k(),r.value=[],L.value="playlist",u.value=0,i.value=null,C.value="等待播放...",n&&(n.pause(),x.value=0,O.value=0,P.value=0),v.value=!1,document.addEventListener("visibilitychange",re),ie()}),Le(()=>{document.removeEventListener("visibilitychange",re),d&&d.close(),S&&clearTimeout(S),J(),n&&(n.pause(),n.onloadedmetadata=null,n.ontimeupdate=null,n.onended=null,n.onerror=null,n.onpause=null,n.onplay=null)});function re(){document.hidden?console.log("页面隐藏，WebSocket 心跳由 Worker 保持"):(console.log("页面可见，检查状态"),v.value&&n&&n.paused&&(console.log("同步播放状态：音频已暂停"),v.value=!1))}return(e,t)=>(g(),f("div",$e,[t[23]||(t[23]=Q('<div class="bg-gradient" data-v-4e25dac0></div><div class="bg-blobs" data-v-4e25dac0><div class="blob blob-1" data-v-4e25dac0></div><div class="blob blob-2" data-v-4e25dac0></div><div class="blob blob-3" data-v-4e25dac0></div></div>',2)),l("div",Ge,[l("header",je,[t[7]||(t[7]=Q('<div class="header-left" data-v-4e25dac0><div class="logo" data-v-4e25dac0><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-4e25dac0><path d="M9 18V5l12-2v13" data-v-4e25dac0></path><circle cx="6" cy="18" r="3" data-v-4e25dac0></circle><circle cx="18" cy="16" r="3" data-v-4e25dac0></circle></svg><span data-v-4e25dac0>WaveMusic</span></div></div>',1)),l("div",Fe,[l("div",{class:"user-menu",onClick:t[0]||(t[0]=a=>j.value=!j.value)},[t[5]||(t[5]=l("div",{class:"user-avatar"},[l("svg",{viewBox:"0 0 24 24",fill:"currentColor"},[l("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"})])],-1)),l("span",Xe,w(X.value),1),l("div",{class:U(["status-indicator",{online:B.value}])},null,2),(g(),f("svg",{class:U(["dropdown-arrow",{active:j.value}]),viewBox:"0 0 24 24",fill:"currentColor"},[...t[4]||(t[4]=[l("path",{d:"M7 10l5 5 5-5z"},null,-1)])],2))]),l("div",{class:U(["dropdown-menu",{show:j.value}])},[l("div",{class:"dropdown-item",onClick:Ee},[...t[6]||(t[6]=[l("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[l("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4M16 17l5-5-5-5M21 12H9"})],-1),ee(" 退出登录 ",-1)])])],2)])]),l("main",Ke,[i.value?(g(),f("div",et,[l("div",tt,[l("div",{class:U(["album-cover",{playing:v.value}])},[l("div",lt,[l("img",{src:i.value.coverUrl||ve,alt:"专辑封面",onError:xe},null,40,nt),t[10]||(t[10]=l("div",{class:"cover-shine"},null,-1))]),t[11]||(t[11]=l("div",{class:"cover-ring"},null,-1))],2)]),l("div",ot,[l("h1",at,w(i.value.title),1),l("p",st,w(i.value.artist),1),l("p",it,[i.value._temporary?(g(),f("span",rt,[...t[12]||(t[12]=[l("svg",{viewBox:"0 0 24 24"},[l("path",{d:"M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3z"}),l("path",{d:"M17 11c0 2.76-2.24 5-5 5s-5-2.24-5-5H5c0 3.53 2.61 6.43 6 6.92V21h2v-3.08c3.39-.49 6-3.39 6-6.92h-2z"})],-1),ee(" 插播语音 ",-1)])])):G("",!0),C.value?(g(),f("span",ut,w(C.value),1)):G("",!0)])]),l("div",ct,[l("div",{class:"progress-bar",onClick:_e},[t[14]||(t[14]=l("div",{class:"progress-track"},null,-1)),l("div",{class:"progress-fill",style:ue({width:P.value+"%"})},[...t[13]||(t[13]=[l("div",{class:"progress-glow"},null,-1)])],4),l("div",{class:"progress-thumb",style:ue({left:P.value+"%"})},null,4)]),l("div",dt,[l("span",vt,w(Z(x.value)),1),l("span",pt,w(Z(O.value)),1)])]),l("div",ft,[l("button",{class:"control-btn control-btn-secondary",onClick:ae},[...t[15]||(t[15]=[l("svg",{viewBox:"0 0 24 24",fill:"currentColor"},[l("path",{d:"M6 6h2v12H6zm3.5 6l8.5 6V6z"})],-1)])]),l("button",{class:"control-btn control-btn-primary",onClick:be},[v.value?(g(),f("svg",yt,[...t[17]||(t[17]=[l("path",{d:"M6 19h4V5H6v14zm8-14v14h4V5h-4z"},null,-1)])])):(g(),f("svg",gt,[...t[16]||(t[16]=[l("path",{d:"M8 5v14l11-7z"},null,-1)])]))]),l("button",{class:"control-btn control-btn-secondary",onClick:se},[...t[18]||(t[18]=[l("svg",{viewBox:"0 0 24 24",fill:"currentColor"},[l("path",{d:"M6 18l8.5-6L6 6v12zM16 6v12h2V6h-2z"})],-1)])])]),L.value==="playlist"&&r.value.length>1?(g(),f("button",{key:0,class:"playlist-trigger",onClick:t[1]||(t[1]=a=>Y.value=!0)},[t[19]||(t[19]=l("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[l("path",{d:"M9 18V5l12-2v13"}),l("circle",{cx:"6",cy:"18",r:"3"}),l("circle",{cx:"18",cy:"16",r:"3"})],-1)),l("span",null,"播放列表 ("+w(r.value.length)+")",1)])):G("",!0)])):(g(),f("div",Ze,[t[9]||(t[9]=Q('<div class="waiting-animation" data-v-4e25dac0><div class="music-notes" data-v-4e25dac0><span class="note note-1" data-v-4e25dac0>♪</span><span class="note note-2" data-v-4e25dac0>♫</span><span class="note note-3" data-v-4e25dac0>♪</span></div></div><h2 class="waiting-title" data-v-4e25dac0>等待播放</h2>',2)),B.value?(g(),f("p",Qe," 已就绪，等待推送 ")):(g(),f("p",qe,[...t[8]||(t[8]=[l("span",{class:"pulse-dot"},null,-1),ee(" 正在连接服务器... ",-1)])]))]))])]),l("div",{class:U(["playlist-panel",{show:Y.value}])},[l("div",{class:"playlist-backdrop",onClick:t[2]||(t[2]=a=>Y.value=!1)}),l("div",It,[l("div",mt,[t[21]||(t[21]=l("h2",null,"播放列表",-1)),l("button",{class:"close-btn",onClick:t[3]||(t[3]=a=>Y.value=!1)},[...t[20]||(t[20]=[l("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[l("path",{d:"M18 6L6 18M6 6l12 12"})],-1)])])]),l("div",ht,[(g(!0),f(De,null,Me(r.value,(a,s)=>(g(),f("div",{key:a.id,class:U(["playlist-item",{active:s===u.value,"temp-voice":a._temporary}]),onClick:_=>{ye(s),Y.value=!1}},[l("div",_t,[s===u.value&&v.value?(g(),f("svg",Tt,[...t[22]||(t[22]=[l("rect",{x:"6",y:"6",width:"4",height:"12",fill:"currentColor"},null,-1),l("rect",{x:"14",y:"6",width:"4",height:"12",fill:"currentColor"},null,-1)])])):(g(),f("span",St,w(s+1),1))]),l("div",wt,[l("div",Ct,[l("span",kt,w(a.title),1),a._temporary?(g(),f("span",Et,"插播")):G("",!0)]),l("span",xt,w(a.artist),1)]),a.duration?(g(),f("div",Ot,w(Z(a.duration)),1)):G("",!0)],10,bt))),128))])])],2)]))}},Vt=Oe(Lt,[["__scopeId","data-v-4e25dac0"]]);export{Vt as default};
